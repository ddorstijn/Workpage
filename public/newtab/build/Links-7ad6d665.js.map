{"version":3,"file":"Links-7ad6d665.js","sources":["../../../src/newtab/components/LinkItem.svelte","../../../src/newtab/components/Links.svelte"],"sourcesContent":["<script>\n  import { createEventDispatcher } from 'svelte';\n  export let item;\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<div class=\"item\">\n  <a class=\"subtitle2\" href={item.url}>{item.title}</a>\n  <div class=\"item-actions\">\n    <button class=\"material-icons [ md-14 no-gutters ] [ alert ]\" on:click={dispatch('remove', {item})} >\n      close\n    </button>\n  </div>\n</div>\n\n<style>\n\t.item {\n\t\tposition: relative;\n\t\twidth: max-content;\n\n\t\tdisplay: flex;\n\t\tfont-size: 0.75rem;\n\t}\n\n\t.item:hover {\n\t\tfilter: brightness(125%);\n\t}\n\n\t.item > a {\n\t\ttext-decoration: none;\n\t\tcolor: inherit;\n\t}\n\n\t.item:hover > .item-actions {\n\t\topacity: 1;\n\t}\n</style>","<script>\n\timport { currentId, activeId } from \"../store.js\";\n\timport { createPopperActions } from \"svelte-popperjs\";\n\timport SortableGroup from \"./SortableGroup.svelte\";\n\timport LinkItem from \"./LinkItem.svelte\";\n\n\t// -- Members -- \\\\\n\tconst [linkPopperRef, linkPopperContent] = createPopperActions();\n\tconst [groupPopperRef, groupPopperContent] = createPopperActions();\n\tconst popperOptions = { placement: \"top\" };\n\n\tlet creatingGroup = false;\n\tlet creatingLink = false;\n\tlet links = [];\n\n\t// -- Initialization -- \\\\\n\tactiveId.subscribe((val) => {\n\t\tchrome.storage.sync.get([`links-${val}`], function (result) {\n\t\t\tlinks = result[`links-${val}`] ?? [];\n\t\t\tsyncLinks();\n\t\t});\n\t});\n\n\t// -- Synchronization \\\\\n\tasync function syncLinks() {\n\t\ttry {\n\t\t\tlinks = links;\n\t\t\tchrome.storage.sync.set({ [`links-${$activeId}`]: links });\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\n\t// -- Functions -- \\\\\n\tasync function addGroup() {\n\t\tlet title = this.querySelector(\"input\").value;\n\n\t\tif (links.length >= 4) return;\n\t\tlinks.push({\n\t\t\tid: $currentId++,\n\t\t\ttitle,\n\t\t\titems: [],\n\t\t});\n\n\t\tsyncLinks();\n\t\tthis.reset();\n\t\tcreatingGroup = false;\n\t}\n\n\tasync function removeGroup(group) {\n\t\tconst index = links.indexOf(group);\n\t\tif (index > -1) {\n\t\t\tlinks.splice(index, 1);\n      group = group;\n\t\t}\n\t}\n\n\n\tasync function addLink() {\n\t\tconst groupId = Number(this.querySelector(\"select\").value);\n\t\tconst title = this.querySelector('input[type=\"text\"]').value;\n\t\tconst url = this.querySelector('input[type=\"url\"]').value;\n\t\tconst group = links.find((group) => group.id === groupId);\n\n\t\tgroup.items.push({\n\t\t\tid: $currentId++,\n\t\t\ttitle,\n\t\t\turl,\n\t\t});\n\n\t\tsyncLinks();\n\t\tthis.reset();\n\t\tcreatingLink = false;\n\t}\n</script>\n\n<article>\n\t<div class=\"link-wrapper\">\n\t\t{#each links as group}\n\t\t\t<SortableGroup itemComponent={LinkItem} {group} on:remove={removeGroup(group)} on:sync={syncLinks} />\n\t\t{/each}\n\t</div>\n\t<div class=\"action-buttons\">\n\t\t<button\n\t\t\tclass=\"hint\"\n\t\t\ton:click={() => (creatingLink = true)}\n\t\t\tuse:linkPopperRef\n\t\t>\n\t\t\tAdd link\n\t\t</button>\n\t\t<div class=\"divider-y\" />\n\t\t<button\n\t\t\tclass=\"hint\"\n\t\t\ton:click={() => (creatingGroup = true)}\n\t\t\tuse:groupPopperRef\n\t\t>\n\t\t\tAdd group\n\t\t</button>\n\t</div>\n\t{#if creatingLink}\n\t\t<div\n\t\t\tclass=\"tooltip [ surface elevation-24 ]\"\n\t\t\tuse:linkPopperContent={popperOptions}\n\t\t>\n\t\t\t<span class=\"caption hint\">Create link item</span>\n\t\t\t<form on:submit|preventDefault={addLink}>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"Name\" required />\n\t\t\t\t\t\t<span>Title</span>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<select required>\n\t\t\t\t\t\t\t<option value=\"\" disabled selected></option>\n\t\t\t\t\t\t\t{#each links as link}\n\t\t\t\t\t\t\t\t<option value={link.id}>{link.title}</option>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<span>Group</span>\n\t\t\t\t\t</label>\n\t\t\t\t</fieldset>\n\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"url\" placeholder=\"www.example.com\" required />\n\t\t\t\t\t<span>Url</span>\n\t\t\t\t</label>\n\n\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t<button type=\"button\" on:click={() => (creatingLink = false)}>\n\t\t\t\t\t\tclose\n\t\t\t\t\t</button>\n\t\t\t\t\t<input class=\"elevation-2\" type=\"submit\" value=\"Add link\" />\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div class=\"arrow\" data-popper-arrow />\n\t\t</div>\n\t{/if}\n\t{#if creatingGroup}\n\t\t<div\n\t\t\tclass=\"tooltip [ surface elevation-24 ]\"\n\t\t\tuse:groupPopperContent={popperOptions}\n\t\t>\n\t\t\t<span class=\"caption hint\">Create link group</span>\n\t\t\t<form on:submit|preventDefault={addGroup}>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"text\" placeholder=\"Name\" />\n\t\t\t\t\t<span>Title</span>\n\t\t\t\t</label>\n\n\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t<button type=\"button\" on:click={() => (creatingGroup = false)}>\n\t\t\t\t\t\tclose\n\t\t\t\t\t</button>\n\t\t\t\t\t<input class=\"elevation-2\" type=\"submit\" value=\"Add group\" />\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div class=\"arrow\" data-popper-arrow />\n\t\t</div>\n\t{/if}\n</article>\n\n<style>\n\tarticle {\n\t\twidth: 100%;\n\t\tmargin-top: var(--space-8);\n\t}\n\n\t.link-wrapper {\n\t\twidth: 100%;\n\t\tdisplay: grid;\n\t\tgrid-auto-flow: column;\n\t\tgrid-auto-columns: minmax(auto, 15rem);\n\t\tjustify-content: center;\n\t\tjustify-items: center;\n\t\tgap: var(--space-8);\n\t}\n\n\t.action-buttons {\n\t\tmargin-top: var(--space-12);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;yBAQwC,GAAI,IAAC,KAAK;;;;;;;;;;;;;;;;;;;+CAArB,GAAI,IAAC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;mCAEuC,GAAQ,IAAC,QAAQ,IAAG,IAAI,WAAJ,GAAI,sBAAxB,GAAQ,IAAC,QAAQ,IAAG,IAAI,WAAJ,GAAI;;;;;;;;;;;;+DAF5D,GAAI,IAAC,KAAK;;uEAArB,GAAI,IAAC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;OANxB,IAAI;OAEV,QAAQ,GAAG,qBAAqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBC2EN,QAAQ;;;;;;;kCAAqB,GAAW,eAAC,GAAK,wBAAjB,GAAW,eAAC,GAAK;;;yCAAY,GAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAoCtF,GAAK;;;;gCAAV,MAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4DAVsB,GAAO;sFAHhB,GAAa;;;;;;;;2BAazB,GAAK;;;;+BAAV,MAAI;;;;;;;;;;;;;;;;oCAAJ,MAAI;;;;;;;;;;;;;;;;;;;;;;;;;wBACoB,GAAI,KAAC,KAAK;;;;;;;;kDAApB,GAAI,KAAC,EAAE;;;;;;;;;8DAAG,GAAI,KAAC,KAAK;;oFAApB,GAAI,KAAC,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6DA4BK,GAAQ;uFAHhB,GAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BA/D/B,GAAK;;;;kCAAV,MAAI;;;;;;;;kCAqBF,GAAY;mCAuCZ,GAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA5DV,GAAK;;;;iCAAV,MAAI;;;;;;;;;;;;;;;;0BAAJ,MAAI;;;;;;;wBAqBF,GAAY;;;;;;;;;;;;;yBAuCZ,GAAa;;;;;;;;;;;;;;;;oCA5Df,MAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAvEA,aAAa,EAAE,iBAAiB,IAAI,mBAAmB;QACvD,cAAc,EAAE,kBAAkB,IAAI,mBAAmB;OAC1D,aAAa,KAAK,SAAS,EAAE,KAAK;KAEpC,aAAa,GAAG,KAAK;KACrB,YAAY,GAAG,KAAK;KACpB,KAAK;;;CAGT,QAAQ,CAAC,SAAS,CAAE,GAAG;EACtB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,WAAW,GAAG,eAAe,MAAM;mBACzD,KAAK,GAAG,MAAM,UAAU,GAAG;GAC3B,SAAS;;;;;gBAKI,SAAS;;;GAGtB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,aAAa,SAAS,KAAK,KAAK;UAC/C,CAAC;GACT,OAAO,CAAC,KAAK,CAAC,CAAC;;;;;gBAKF,QAAQ;MAClB,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,KAAK;MAEzC,KAAK,CAAC,MAAM,IAAI,CAAC;;EACrB,KAAK,CAAC,IAAI;GACT,EAAE,6BAAE,UAAU;GACd,KAAK;GACL,KAAK;;;EAGN,SAAS;EACT,IAAI,CAAC,KAAK;kBACV,aAAa,GAAG,KAAK;;;gBAGP,WAAW,CAAC,KAAK;QACzB,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK;;MAC7B,KAAK,IAAI,CAAC;GACb,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;GAClB,KAAK,GAAG,KAAK;;;;gBAKH,OAAO;QACf,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,KAAK;QACnD,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,sBAAoB,EAAE,KAAK;QACtD,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,qBAAmB,EAAE,KAAK;QACnD,KAAK,GAAG,KAAK,CAAC,IAAI,CAAE,KAAK,IAAK,KAAK,CAAC,EAAE,KAAK,OAAO;;EAExD,KAAK,CAAC,KAAK,CAAC,IAAI;GACf,EAAE,6BAAE,UAAU;GACd,KAAK;GACL,GAAG;;;EAGJ,SAAS;EACT,IAAI,CAAC,KAAK;kBACV,YAAY,GAAG,KAAK;;;;;;;;;6CAaF,YAAY,GAAG,IAAI;+CAQnB,aAAa,GAAG,IAAI;+CAoCI,YAAY,GAAG,KAAK;+CAsBpB,aAAa,GAAG,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}