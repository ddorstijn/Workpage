{"version":3,"file":"Projects-4b95f4d6.js","sources":["../../../src/newtab/components/ProjectItem.svelte","../../../src/newtab/components/Projects.svelte"],"sourcesContent":["<script>\n\timport { activeId } from \"../../store.js\";\n  import { createEventDispatcher } from 'svelte';\n\n  export let item;\n\n\tconst dispatch = createEventDispatcher();\n  let editing = false;\n\n\tfunction setActive(item) {\n\t\t$activeId = item.id;\n\t\topen = false;\n\t}\n\n\tfunction startEdit() {\n\t\tediting = true;\n\t}\n\n\tfunction stopEdit() {\n\t\tediting = false;\n\t\tdispatch('sync');\n\t}\n</script>\n\n<div class=\"project-item\">\n  {#if editing}\n    <form on:submit|preventDefault={stopEdit}>\n      <input\n        placeholder=\"Item name\"\n        bind:value={item.title}\n        on:blur={stopEdit}\n      />\n      <input type=\"submit\" hidden />\n    </form>\n  {:else}\n    <span on:click={setActive(item)}>{item.title}</span>\n  {/if}\n  <div class=\"item-actions\">\n    <button class=\"material-icons [ md-14 no-gutters ] [ warning ]\" on:click={startEdit}>\n      edit\n    </button>\n    <button class=\"material-icons [ md-14 no-gutters ] [ alert ]\" on:click={dispatch('remove', item)}>\n      close\n    </button>\n  </div>\n</div>\n\n<style>\n\t.project-item {\n\t\tposition: relative;\n\t\twidth: max-content;\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n  .project-item:hover {\n\t\tfilter: brightness(125%);\n  }\n\n\t.project-item > span {\n\t\tcursor: pointer;\n\t}\n\n\t.project-item:hover > .item-actions {\n\t\topacity: 1;\n\t}\n</style>","<script>\n\timport { currentId, activeId, projects } from \"../../store.js\";\n\timport SortableGroup from \"./SortableGroup.svelte\";\n\timport ProjectItem from \"./ProjectItem.svelte\";\n\n\timport { createPopperActions } from \"svelte-popperjs\";\n\tconst [projectPopperRef, projectPopperContent] = createPopperActions();\n\tconst [groupPopperRef, groupPopperContent] = createPopperActions();\n\tconst popperOptions = {\n\t\tplacement: \"top\",\n\t};\n\n\t// -- Members -- \\\\\n\tlet open = false;\n\tlet creatingProject = false;\n\tlet creatingGroup = false;\n\tlet projectTitle = \"\";\n\n\t// -- Initialization -- \\\\\n\tprojects.subscribe((val) => {\n\t\ttry {\n\t\t\tchrome.storage.sync.set({ projects: val });\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t});\n\n\t// -- Functions -- \\\\\n\tfunction addGroup() {\n\t\tif ($projects.length >= 8) return;\n\n\t\tlet title = this.querySelector('input[type=\"text\"]').value;\n\n\t\t$projects = [\n\t\t\t...$projects,\n\t\t\t{\n\t\t\t\tid: $currentId++,\n\t\t\t\ttitle,\n\t\t\t\titems: [],\n\t\t\t},\n\t\t];\n\n\t\tthis.reset();\n\t\tcreatingGroup = false;\n\t}\n\n\tfunction removeGroup(group) {\n\t\tconst index = $projects.indexOf(group);\n\t\tif (index > -1) {\n\t\t\t$projects.splice(index, 1);\n\t\t\t$projects = $projects;\n\t\t}\n\t}\n\n\tfunction addProject() {\n\t\tlet groupId = Number(this.querySelector(\"select\").value);\n\t\tlet title = this.querySelector('input[type=\"text\"]').value;\n\t\tlet group = $projects.find((group) => group.id === groupId);\n\n\t\tgroup.items.push({\n\t\t\tid: $currentId++,\n\t\t\ttitle,\n\t\t});\n\n\t\t$projects = $projects;\n\t\tcreatingProject = false;\n\t\tthis.reset();\n\t}\n\n\t// -- Human readability -- \\\\\n\t$: $projects.forEach(projectGroup => {\n\t\tlet project = projectGroup.items.find(p => p.id == $activeId);\n\t\tif (project) {\n\t\t\tprojectTitle = project.title;\n\t\t}\n\t});\n</script>\n\n<article>\n\t<button class=\"elevation-2\" on:click={() => (open = true)}>\n\t\t<i class=\"material-icons\">inventory_2</i>\n\t\t{projectTitle}\n\t</button>\n\n\t{#if open}\n\t\t<div class=\"scrim\">\n\t\t\t<div class=\"modal [ surface elevation-1 ]\">\n\t\t\t\t<header>\n\t\t\t\t\t<h6 class=\"hint\">Projects</h6>\n\t\t\t\t\t<button class=\"material-icons [ hint no-gutters ]\" on:click={() => (open = false)}>\n\t\t\t\t\t\tclose\n\t\t\t\t\t</button>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"modal__body\">\n\t\t\t\t\t{#each $projects as group}\n\t\t\t\t\t\t<SortableGroup itemComponent={ProjectItem} {group} on:remove={removeGroup(group)} on:sync={() => $projects = $projects} />\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"action-buttons\">\n\t\t\t\t\t<button on:click={() => (creatingProject = true)} use:projectPopperRef>\n\t\t\t\t\t\tAdd project\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"divider-y\"></div>\n\t\t\t\t\t<button on:click={() => (creatingGroup = true)} use:groupPopperRef>\n\t\t\t\t\t\tAdd group\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{#if creatingProject}\n\t\t\t\t\t<div class=\"tooltip [ surface elevation-24 ]\" use:projectPopperContent={popperOptions}>\n\t\t\t\t\t\t<span class=\"caption hint\">Create project item</span>\n\t\t\t\t\t\t<form on:submit|preventDefault={addProject}>\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"Name\" required />\n\t\t\t\t\t\t\t\t\t<span>Title</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<select required>\n\t\t\t\t\t\t\t\t\t\t<option value=\"\" disabled selected></option>\n\t\t\t\t\t\t\t\t\t\t{#each $projects as project}\n\t\t\t\t\t\t\t\t\t\t\t<option value={project.id}>{project.title}</option>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t<span>Group</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</fieldset>\n\n\t\t\t\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t\t\t\t<button type=\"button\" on:click={() => (creatingProject = false)} >\n\t\t\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<input class=\"elevation-2\" type=\"submit\" value=\"Add project\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class=\"arrow\" data-popper-arrow />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if creatingGroup}\n\t\t\t\t\t<div class=\"tooltip [ surface elevation-24 ]\" use:groupPopperContent={popperOptions}>\n\t\t\t\t\t\t<span class=\"caption hint\">Create project group</span>\n\t\t\t\t\t\t<form on:submit|preventDefault={addGroup}>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"Name\" required />\n\t\t\t\t\t\t\t\t<span>Title</span>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t\t\t\t<button type=\"button\" on:click={() => (creatingGroup = false)}>\n\t\t\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<input class=\"elevation-2\" type=\"submit\" value=\"Add group\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class=\"arrow\" data-popper-arrow />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</article>\n\n<style>\n\t.scrim {\n\t\tposition: absolute;\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\tleft: 0;\n\t\ttop: 0;\n\n\t\tdisplay: flex; \n\t\tjustify-content: center;\n\t\talign-items: center; \n\t\tz-index: 10;\n\t\tbackground-color: rgba(0,0,0,0.25);\n\t}\n\n\t.modal {\n\t\twidth: 50vw;\n\t\tpadding: 2rem; \n\t\tz-index: 20;\n\t}\n\n\t.modal > header {\n\t\tmargin-bottom: 1rem;\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.modal__body {\n\t\tdisplay: grid; \n\t\tgrid-template-columns: 1fr 1fr 1fr;\n\t\tgap: 4rem;\n\t}\n\n\t.action-buttons {\n\t\tmargin-top: var(--space-4);\n\t\tdisplay: flex; \n\t\tjustify-content: center;\n\t}\n</style>"],"names":[],"mappings":"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"}