{"version":3,"file":"SortableGroup-0217d184.js","sources":["../../../src/newtab/components/SortableGroup.svelte"],"sourcesContent":["<script>\n\timport { createPopperActions } from \"svelte-popperjs\";\n  import { createEventDispatcher } from 'svelte';\n\timport { dndzone } from \"svelte-dnd-action\";\n\timport { flip } from \"svelte/animate\";\n\n  export let group;\n  export let itemComponent;\n\n\tconst dispatch = createEventDispatcher();\n\tconst [popperRef, popperContent] = createPopperActions();\n\tconst popperOptions = { placement: \"right-start\" };\n\tconst flipDurationMs = 300;\n\tlet dragDisabled = true;\n\n  let editing = false;\n\n\tasync function removeItem(item) {\n\t\tconst index = group.items.indexOf(item);\n\t\tif (index > -1) {\n\t\t\tgroup.items.splice(index, 1);\n\t\t\tdispatch('sync');\n\t\t}\n\t}\n\n\tfunction startEdit() {\n\t\tediting = true;\n\t}\n\n\tfunction stopEdit() {\n\t\tediting = false;\n\t\tdispatch('sync');\n\t}\n\n\tfunction handleDndConsider(e) {\n\t\tgroup.items = e.detail.items;\n\t}\n\n\tfunction handleDndFinalize(e) {\n\t\tgroup.items = e.detail.items;\n\t\tif (e.detail.info.source == \"pointer\") {\n\t\t\tdragDisabled = true;\n\t\t}\n\n\t\tdispatch('sync');\n\t}\n\n\tfunction startDrag(e) {\n\t\t// preventing default to prevent lag on touch devices (because of the browser checking for screen scrolling)\n\t\te.preventDefault();\n\t\tdragDisabled = false;\n\t}\n</script>\n\n<div class=\"group\">\n  <header>\n    {#if editing == true}\n      <form on:submit|preventDefault={stopEdit}>\n        <input\n          placeholder=\"Group name\"\n          bind:value={group.title}\n          on:blur={stopEdit}\n        />\n        <input type=\"submit\" hidden />\n      </form>\n    {:else}\n      <h5 class=\"emphasis\">\n\t\t\t\t{group.title}\n\t\t\t</h5>\n    {/if}\n\t\t<button class=\"material-icons menu [ md-18 no-gutters ]\" use:popperRef>more_vert</button>\n\t\t<div class=\"tooltip\" use:popperContent={popperOptions}>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<button class=\"no-gutters\" on:click={startEdit}>\n\t\t\t\t\t\t<i class=\"material-icons [ md-18 warning ]\">edit</i>\n\t\t\t\t\t\tEdit group\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<button class=\"no-gutters\" on:click={dispatch('remove', group)}>\n\t\t\t\t\t\t<i class=\"material-icons [ md-18 alert ]\">delete</i>\n\t\t\t\t\t\tDelete group\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class=\"arrow\" data-popper-arrow />\n\t\t</div>\n  </header>\n  <ul \n\t\tuse:dndzone={{\n\t\t\titems: group.items,\n\t\t\tflipDurationMs,\n\t\t\tdragDisabled,\n\t\t\tdropTargetStyle: {},\n\t\t}}\n\t\ton:consider={handleDndConsider}\n\t\ton:finalize={handleDndFinalize}\n>\n    {#each group.items as item(item[\"id\"])}\n      <li animate:flip={{ duration: flipDurationMs }}>\n\t\t\t\t\t<div\n\t\t\t\t\t\taria-label=\"drag-handle\"\n\t\t\t\t\t\tclass=\"drag-handle material-icons md-18 [ hint no-gutters ]\"\n\t\t\t\t\t\tstyle={dragDisabled ? \"cursor: grab\" : \"cursor: grabbing\"}\n\t\t\t\t\t\ton:mousedown={startDrag}\n\t\t\t\t\t\ton:touchstart={startDrag}\n\t\t\t\t\t>\n\t\t\t\t\t\tdrag_indicator\n\t\t\t\t\t</div>\n        <svelte:component this={itemComponent} {item} on:remove={removeItem(item)} />\n      </li>\n    {/each}\n  </ul>\n</div>\n\n<style>\n\theader {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--space-2);\n\t}\n\n\tli {\n\t\tposition: relative;\n\t}\n\n\t.menu {\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: opacity 0.25s ease-in-out;\n\t}\n\n\theader:hover .menu,\n\t.menu:focus {\n\t\tpointer-events: all;\n\t\topacity: 1;\n\t}\n\n\t.tooltip {\n\t\tvisibility: hidden;\n\t}\n\n\t.menu:focus + .tooltip,\n\t.tooltip:active {\n\t\tvisibility: visible;\n\t}\n\n\t.tooltip > ul {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--space-2);\n\t\tpadding: var(--space-2);\n\t}\n\n\t.tooltip li {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.tooltip li:hover {\n\t\tfilter: brightness(125%);\n\t}\n\n\t/* Hack for arrow visibility */\n\t.tooltip > .arrow::before {\n\t\tvisibility: hidden;\n\t}\n\n\t.menu:focus + .tooltip > .arrow::before,\n\t.tooltip:active > .arrow::before {\n\t\tvisibility: visible;\n\t}\n\n\t.drag-handle {\n\t\tposition: absolute;\n\t\tright: 100%;\n\t\ttop: 50%;\t\n\t\ttransform: translateY(-50%);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: opacity 0.25s ease-in-out;\n\t}\n\n\tli:hover > .drag-handle,\n\t.drag-handle:hover {\n\t\tpointer-events: all;\n\t\topacity: 1;\n\t}\n</style>"],"names":[],"mappings":"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"}